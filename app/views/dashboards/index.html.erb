<div class='container-fluid mt-2 g-1'>
    <div class="w-100 text-center">
        <h1>School Dashboard</h1>
    </div>

    <div class="w-75 g-4 mx-auto">
        <div class="row w-100 border border-primary gap-0">
            <div class="col-12 col-md-6 border border-danger rounded">
                <h2>Totals</h2>
                <h4>Students: <%= @students_total_count %></h4>
            </div>
            <div class="col-12 col-md-6 text-center border border-success">
                <h2>Averages</h2>
                <h4> School Overall Average: <%= @students_overall_average %> </h4>
                <% if @grade_averages == "Empty" %>
                <h4> Average per grade not available </h4>
                <% else %>
                <div class="row p-2 mx-auto justify-content-around"> 
                    <div class="col-sm-2 col-6 border border-light rounded p-1">
                        <h4>8: <%= @grade_averages[8]%>% </h4>
                    </div>
                    <div class="col-sm-2 col-6 border border-light rounded p-1">
                        <h4>9: <%= @grade_averages[9]%>% </h4>
                    </div>
                    <div class="col-sm-2 col-6 border border-light rounded p-1">
                        <h4>10: <%= @grade_averages[10]%>% </h4>
                    </div>
                    <div class="col-sm-2 col-6 border border-light rounded p-1">
                        <h4>11: <%= @grade_averages[11]%>% </h4>
                    </div>
                    <div class="col-sm-2 col-6 border border-light rounded p-1">
                        <h4>12: <%= @grade_averages[12]%>% </h4>
                    </div>
                
                </div>
                <% end %>
            </div>
        </div>
        <div class="row gap-0">
            <div class="btn-group p-1 gap-1">
                <% @all_subject_names.each do |subject_name| %>
                    <% btn_classes = "btn rounded text-light " %>
                    <% btn_classes += subject_name == @selected_subject ? "border border-danger" : "" %>
                    <%= form_with url: view_set_selected_subject_path, method: :post, local: true do %>
                    <%= hidden_field_tag :subject_name, subject_name %>
                    <%= submit_tag subject_name, class: btn_classes %>
                    <% end %>
                <% end %>
            </div>
        <div class="row">
        <div class="col-12">Overall Percentage: <%= @selected_subject_overall_percentage %></div>
        </div>
        </div>
    </div>
</div>


